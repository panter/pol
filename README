sudo gem install RedCloth
sudo gem install haml

rails dein_neues_pol_cmd

./script/plugin install git://github.com/rails/acts_as_list.git
./script/plugin install git://github.com/rails/acts_as_tree.git
./script/plugin install git://github.com/rails/exception_notification.git
./script/plugin install git://github.com/thoughtbot/paperclip.git
./script/plugin install git://github.com/technoweenie/permalink_fu.git
./script/plugin install git://github.com/giraffesoft/resource_controller.git

haml --rails .

rake rails:freeze:gems

# zuerst einchecken auf cat (sonst geht der rel. submodule path unten nicht)
git init
# .gitignore file machen, auf Server das git repo anlegen
git add .
git commit -a -m 'initial checkin'
git remote add origin git@cat:dein_repo.git -- < hier dein repo
git push origin master


# git submodule setup
git submodule add git@62.12.171.90:pol.git vendor/plugins/pol
git submodule init
git submodule update

# setup pol
./vendor/plugins/pol/sync.sh

# environment.rb anpassen

  # The default locale is :en and all translations from config/locales/*.rb,yml are auto loaded.
  config.i18n.default_locale = :de
  
  # caching
  config.action_controller.page_cache_directory = RAILS_ROOT + "/public/cache/"
  config.active_record.observers = :page_sweeper, :comp_page_sweeper
end

# environments/test.rb

config.gem "thoughtbot-factory_girl", :lib => "factory_girl"
config.gem "webrat", :version => ">=0.4.3"
config.gem "mocha"

# routes.rb
  map.connect '/', :controller => 'pol', :action => 'index'
  map.connect '/index', :controller => 'pol', :action => 'index'
  map.connect '/:id.js', :controller => 'pol',
                         :action => 'replace_comp'
  map.connect '/:permalink', :controller => 'pol', :action => 'show'

rm public/index.html

# configure pol: /config/initializers/pol.rb
pol_cfg.comp_locations = [ 'left-box', 'right-box' ]
pol_cfg.comp_available = {
  'left-box' => %w( CompText CompImage ),
  'right-box' => %w( CompText CompImage CompGallery  )
}
pol_cfg.password = 'XXXX'



# capify
capify .
copy config/deploy* from other pol project
adapt config/deploy.rb

# htaccess machen
# public/.htaccess
RewriteEngine On

# Rewrite index to check for static
RewriteRule ^$ index

# checks cache directory for already cached pages
RewriteCond %{REQUEST_URI} ^/(../)?[^/]*$
RewriteCond %{DOCUMENT_ROOT}/cache%{REQUEST_URI}.html -f
RewriteRule ^([^.]+)$ cache/%{REQUEST_URI}.html [L]

# y default, Rails appends assetâ€˜s timestamps to all asset paths. This allows
# you to set a cache-expiration date for the asset far into the future
ExpiresActive on
ExpiresByType image/gif              "access plus 1 year"
ExpiresByType image/png              "access plus 1 year"
ExpiresByType image/jpeg             "access plus 1 year"
ExpiresByType image/x-icon           "access plus 1 year"
ExpiresByType text/css               "access plus 1 year"
ExpiresByType application/javascript "access plus 1 year"

# compress static text files
AddOutputFilterByType DEFLATE text/html text/plain text/xml text/javascript text/css application/javascript



Dein SSH Key auf den Server kopieren:
ssh-copy-id XXXXX@dalitz.dreamhost.com

Auf dem Server im App Verzeichnis:
mkdir -p releases shared/backup shared/config shared/log shared/system

shared/config/database.yml anlegen:
production:
  adapter: mysql
  database: 
  username: 
  password: 
  host: mysql.panter.ch

gem instal RedCloth
gem instal haml

Backconnect vom Server auf cat machen:
ssh 62.12.171.90


Deployen:
cap deploy:migrate

